<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"><title>Scotty Survival</title><style>:root{--bg:#0a0d12;--sky:#1a2940;--ink:#ecf3ff;--red:#ef4f6c;--mint:#69f0c9;--gold:#ffd56d;--line:#2f4868}*{box-sizing:border-box}html,body{margin:0;width:100%;height:100%;overflow:hidden;background:var(--bg);color:var(--ink);font-family:Trebuchet MS,Avenir Next,Segoe UI,sans-serif}body{touch-action:none}canvas{display:block;width:100%;height:100%}</style></head><body><canvas id="c"></canvas><script>(()=>{const t=document.getElementById("c"),e=t.getContext("2d");let l=360,a=740,i=1,n=0;const r=1300,o={};function s(t){const e=new Image;return e.src="black_scottish_terrier_dog_with_red_scarf/rotations/"+t+".png",e}o.e=s("east"),o.w=s("west"),o.ne=s("north-east"),o.nw=s("north-west"),o.se=s("south-east"),o.sw=s("south-west");let f=0;function h(t,e,l,a){if(!f)return;const i=f.createOscillator(),n=f.createGain();i.type=l||"triangle",i.frequency.value=t,n.gain.value=a||.02,n.gain.exponentialRampToValueAtTime(1e-4,f.currentTime+e),i.connect(n).connect(f.destination),i.start(),i.stop(f.currentTime+e)}const c={start:0,dead:0,lvup:0,t:0,time:0,kills:0,spawnT:0,nextSpawn:.8,msg:"",msgT:0,midSeen:0,level:1,xp:0,nextXp:24,stop:0,shake:0,xpPulse:0,cardT:0,best:+localStorage.ss_best||0,choices:[]},x={x:260,y:900,vx:0,vy:0,r:15,hp:100,maxHp:100,speed:185,fireCd:0,fireRate:.46,dmg:12,range:560,shots:1,magnet:88,face:1,rx:0,ry:0,flash:0,gx:1,gy:0,zc:0,zr:0,zt:0,zx:1,zy:0,zcd:0,zDur:1,zSpd:2.1,zLoad:1.5,zCool:5.5,zDmg:24,zDr:.55,mkT:0,mkI:8.8,mkS:0,mkD:14,mkR:54,mkSl:.5,mkDo:12},d={l:0,r:0,u:0,d:0,gr:0};let y=-1,m=0;const p={x:78,y:0,r:42,kr:16,tx:0,ty:0,ax:0,ay:0},g=[],u=[],S=[],M=[],T=[];function b(t,e){return t+Math.random()*(e-t)}function k(t,e,l){return t<e?e:t>l?l:t}function z(t){const e=t-1;return 1+2.70158*e*e*e+1.70158*e*e}function v(t,l,a,i,n){const r=Math.max(0,Math.min(n,.5*Math.min(a,i)));e.beginPath(),e.moveTo(t+r,l),e.lineTo(t+a-r,l),e.quadraticCurveTo(t+a,l,t+a,l+r),e.lineTo(t+a,l+i-r),e.quadraticCurveTo(t+a,l+i,t+a-r,l+i),e.lineTo(t+r,l+i),e.quadraticCurveTo(t,l+i,t,l+i-r),e.lineTo(t,l+r),e.quadraticCurveTo(t,l,t+r,l),e.closePath()}function P(){const t=l<560,e=t?l-14:Math.min(l-20,620),i=t?k(.52*a,320,430):k(.46*a,300,390),n=.5*(l-e),r=a-i-12,o=[];if(t){const t=8,l=e-22,a=Math.max(80,Math.min(112,(i-96-2*t)/3)),s=r+56;for(let e=0;e<3;e++)o.push({x:n+14,y:s+e*(a+t),w:l,h:a})}else{const t=10,l=(e-32-2*t)/3,a=Math.max(120,Math.min(156,i-96)),s=r+58;for(let e=0;e<3;e++)o.push({x:n+16+e*(l+t),y:s,w:l,h:a})}return{mobile:t,bx:n,by:r,bw:e,bh:i,rects:o}}function w(t,l,a,i,n,r){const o=t.split(" ");let s="",f=0;for(let t=0;t<o.length;t++){const h=s?s+" "+o[t]:o[t];if(e.measureText(h).width<=i)s=h;else{if(e.fillText(s,l,a+f*n),f++,f>=r)return;s=o[t]}}f<r&&s&&e.fillText(s,l,a+f*n)}function I(t){return t.includes("Zoomies")?"âš¡":t.includes("Territory")?"ðŸ’§":t.includes("Rapid Fire")?"ðŸ”¥":t.includes("Big Bites")?"ðŸ¦·":t.includes("Speed Paws")?"ðŸ’¨":t.includes("Extra Shot")?"ðŸŽ¯":t.includes("Long Reach")?"ðŸ“¡":t.includes("Snack Magnet")?"ðŸ§²":t.includes("Tough Fur")?"ðŸ›¡ï¸":t.includes("Quick Heal")?"ðŸ’š":"â­"}function R(t){c.shake=k(c.shake+t,0,1.3)}function C(t){c.stop=Math.max(c.stop,t)}function D(){i=Math.max(1,Math.min(2,devicePixelRatio||1)),l=Math.max(320,0|innerWidth),a=Math.max(560,0|innerHeight),t.width=l*i|0,t.height=a*i|0,e.setTransform(i,0,0,i,0,0),e.imageSmoothingEnabled=!1,p.y=a-88}function A(t,e){const l=t-p.x,a=e-p.y;return l*l+a*a<1.8*p.r*(1.8*p.r)}function L(t,e){let l=t-p.x,a=e-p.y;const i=Math.hypot(l,a)||1,n=p.r;i<10?(l=0,a=0):i>n&&(l=l/i*n,a=a/i*n),p.tx=l,p.ty=a,p.ax=l/n,p.ay=a/n}function E(){p.tx=0,p.ty=0,p.ax=0,p.ay=0}function K(t){T.length>=420||T.push(t)}function W(t){S.length>=260||S.push(t)}function q(t){u.length>=260||u.push(t)}function X(t,e,l,a,i){const n=g.length>130?.5:g.length>90?.7:1,r=Math.max(1,a*n|0);for(let a=0;a<r;a++){const a=Math.random()*Math.PI*2,n=(i||70)*(.4+Math.random());K({x:t,y:e,vx:Math.cos(a)*n,vy:Math.sin(a)*n,t:b(.2,.6),c:l})}}function H(t,e,l,a,i){const n=g[t],r=!!i;c.kills++,r?X(n.x,n.y,e||"#ff9675",Math.max(2,.35*(l||9)|0),Math.max(20,.6*(a||70))):(C(.03),R(.08),X(n.x,n.y,e||"#ff9675",l||9,a||70),h(280,.03,"square",.012));const o=260-S.length;if(o>0){const t=r?Math.random()<.25?1:0:1+(Math.random()<.4?1:0);for(let e=0;e<Math.min(t,o);e++)W({x:n.x+b(-7,7),y:n.y+b(-7,7),v:0|b(5,8),m:1,t:0})}g.splice(t,1)}function B(t){if(c.dead=0,c.lvup=0,c.t=0,c.time=0,c.spawnT=0,c.nextSpawn=.8,c.kills=0,c.msg="",c.msgT=0,c.midSeen=0,c.level=1,c.xp=0,c.nextXp=24,c.stop=0,c.shake=0,c.xpPulse=0,c.cardT=0,c.choices=[],x.x=260,x.y=900,x.vx=0,x.vy=0,x.hp=100,x.maxHp=100,x.speed=185,x.fireCd=0,x.fireRate=.46,x.dmg=12,x.range=560,x.shots=1,x.magnet=88,x.face=1,x.rx=0,x.ry=0,x.flash=0,x.gx=1,x.gy=0,x.zc=0,x.zr=0,x.zt=0,x.zx=1,x.zy=0,x.zcd=0,x.zDur=1,x.zSpd=2.1,x.zLoad=1.5,x.zCool=5.5,x.zDmg=24,x.zDr=.55,x.mkT=5.2,x.mkI=8.8,x.mkS=0,x.mkD=14,x.mkR=54,x.mkSl=.5,x.mkDo=12,g.length=0,u.length=0,S.length=0,M.length=0,T.length=0,d.l=d.r=d.u=d.d=d.gr=0,m=0,E(),t){for(let t=0;t<24;t++)W({x:r+b(-120,120),y:900+b(-120,120),v:7,m:1,t:0});for(let t=0;t<10;t++)W({x:330+58*t,y:900+b(-60,60),v:5,m:1,t:0})}}function O(t){for(c.xp+=t;c.xp>=c.nextXp;){c.xp-=c.nextXp,c.level++,c.nextXp=1.36*c.nextXp+9|0,Z(),c.lvup=1,c.cardT=0,c.xpPulse=.65,c.msg="Level up! Open the skill book",c.msgT=2.1,C(.06),R(.2),h(860,.08,"triangle",.03);break}}const Y=[{n:"Rapid Fire",d:"Shoot faster",f:()=>x.fireRate=Math.max(.15,.84*x.fireRate)},{n:"Big Bites",d:"+6 damage",f:()=>x.dmg+=6},{n:"Speed Paws",d:"+24 move speed",f:()=>x.speed+=24},{n:"Extra Shot",d:"+1 bullet",f:()=>x.shots=Math.min(5,x.shots+1)},{n:"Long Reach",d:"+120 range",f:()=>x.range+=120},{n:"Snack Magnet",d:"+30 pickup radius",f:()=>x.magnet+=30},{n:"Tough Fur",d:"+25 max hp",f:()=>{x.maxHp+=25,x.hp=Math.min(x.maxHp,x.hp+25)}},{n:"Quick Heal",d:"Heal 35 hp",f:()=>x.hp=Math.min(x.maxHp,x.hp+35)},{n:"Zoomies Time",d:"+0.25s zoomies",f:()=>x.zDur=Math.min(2.6,x.zDur+.25)},{n:"Zoomies CD",d:"-0.7s cooldown",f:()=>x.zCool=Math.max(1.4,x.zCool-.7)},{n:"Zoomies Speed",d:"+0.35x dash speed",f:()=>x.zSpd=Math.min(4,x.zSpd+.35)},{n:"Zoomies Charge",d:"-0.2s load time",f:()=>x.zLoad=Math.max(.55,x.zLoad-.2)},{n:"Territory CD",d:"-0.55s marking cooldown",f:()=>x.mkI=Math.max(3.2,x.mkI-.55)},{n:"Territory Radius",d:"+12 puddle radius",f:()=>x.mkR=Math.min(110,x.mkR+12)},{n:"Territory Duration",d:"+4s puddle life",f:()=>x.mkD=Math.min(40,x.mkD+4)},{n:"Territory Potency",d:"+8 dps and +10% slow",f:()=>{x.mkDo=Math.min(46,x.mkDo+8),x.mkSl=Math.min(.85,x.mkSl+.1)}}];function Z(){const t=Y.slice();c.choices=[];for(let e=0;e<3&&t.length;e++){const e=Math.random()*t.length|0;c.choices.push(t[e]),t.splice(e,1)}}function F(t){c.lvup&&c.choices[t]&&(c.choices[t].f(),c.lvup=0,c.msg=c.choices[t].n+" applied",c.msgT=1.4,c.xpPulse=.25,R(.08),X(x.x,x.y,"#69f0c9",12,90))}function _(){f||(f=new(window.AudioContext||window.webkitAudioContext)),c.start||(c.start=1,B(1),h(430,.05,"triangle",.02))}function U(e){y===e.pointerId&&(m=0,E(),t.hasPointerCapture(y)&&t.releasePointerCapture(y),y=-1)}addEventListener("resize",D),addEventListener("keydown",function(t){const e=t.code;if("Space"!==e&&"ArrowUp"!==e&&"ArrowDown"!==e&&"ArrowLeft"!==e&&"ArrowRight"!==e||t.preventDefault(),"Space"!==e&&"Enter"!==e||_(),c.dead&&("Space"===e||"Enter"===e||"KeyR"===e))return B(1),void h(360,.05,"triangle",.02);c.lvup?"Digit1"===e?F(0):"Digit2"===e?F(1):"Digit3"===e&&F(2):c.start&&!c.dead&&("KeyA"===e||"ArrowLeft"===e?d.l=1:"KeyD"===e||"ArrowRight"===e?d.r=1:"KeyW"===e||"ArrowUp"===e?d.u=1:"KeyS"===e||"ArrowDown"===e?d.d=1:"KeyE"!==e&&"ShiftLeft"!==e&&"ShiftRight"!==e||(d.gr=1))}),addEventListener("keyup",function(t){const e=t.code;"KeyA"===e||"ArrowLeft"===e?d.l=0:"KeyD"===e||"ArrowRight"===e?d.r=0:"KeyW"===e||"ArrowUp"===e?d.u=0:"KeyS"===e||"ArrowDown"===e?d.d=0:"KeyE"!==e&&"ShiftLeft"!==e&&"ShiftRight"!==e||(d.gr=0)}),t.addEventListener("pointerdown",function(e){if(!(y>=0&&y!==e.pointerId)){if(y=e.pointerId,t.setPointerCapture(y),_(),c.dead)return B(1),void h(360,.05,"triangle",.02);c.lvup?function(t,e){if(!c.lvup)return;const l=P().rects;for(let a=0;a<l.length;a++){const i=l[a];if(t>=i.x&&t<=i.x+i.w&&e>=i.y&&e<=i.y+i.h){F(a);break}}}(e.clientX,e.clientY):A(e.clientX,e.clientY)&&(m=1,L(e.clientX,e.clientY))}},{passive:1}),t.addEventListener("pointermove",function(t){y!==t.pointerId||!c.start||c.dead||c.lvup||(m||A(t.clientX,t.clientY))&&(m=1,L(t.clientX,t.clientY))},{passive:1}),t.addEventListener("pointerup",U,{passive:1}),t.addEventListener("pointercancel",U,{passive:1}),D(),B(1),requestAnimationFrame(function t(s){n||(n=s);let f=.001*(s-n);n=s,f=Math.max(0,Math.min(.034,f)),function(t){const e=t;c.msgT>0&&(c.msgT-=e),c.stop>0&&(c.stop=Math.max(0,c.stop-e),t*=.06),c.shake>0&&(c.shake=Math.max(0,c.shake-2.2*e)),c.xpPulse>0&&(c.xpPulse=Math.max(0,c.xpPulse-1.7*e)),x.flash>0&&(x.flash=Math.max(0,x.flash-7*e)),x.rx*=Math.max(0,1-18*e),x.ry*=Math.max(0,1-18*e),x.zcd>0&&(x.zcd=Math.max(0,x.zcd-e)),x.mkS>0&&(x.mkS=Math.max(0,x.mkS-e)),x.mkT>0&&x.zt<=0&&(x.mkT=Math.max(0,x.mkT-e));for(let e=M.length-1;e>=0;e--){const l=M[e];l.t-=t,l.t<=0&&M.splice(e,1)}for(let e=T.length-1;e>=0;e--){const l=T[e];l.t-=t,l.x+=l.vx*t,l.y+=l.vy*t,l.vy+=480*t,l.t<=0&&T.splice(e,1)}if(!c.start||c.dead)return;if(c.lvup)return void(c.cardT=Math.min(.9,c.cardT+e));c.t+=t,c.time+=t,!c.midSeen&&Math.hypot(x.x-r,x.y-900)<200&&(c.midSeen=1,c.msg='"what the dog doing?" by some human.',c.msgT=3.2,h(520,.05,"triangle",.02));const l=(d.r?1:0)-(d.l?1:0),a=(d.d?1:0)-(d.u?1:0),i=Math.hypot(p.ax,p.ay);let n=l,o=a;m&&i>.12&&(n+=p.ax,o+=p.ay);let s=Math.hypot(n,o);s>1&&(n/=s,o/=s);const f=(Math.hypot(l,a)>.05||m&&i>.12)&&x.mkS<=0;if(x.mkT<=0&&x.mkS<=0&&x.zt<=0&&x.zr<=0&&x.zc<=0&&(M.length>=18&&M.shift(),M.push({x:x.x+4*x.gx,y:x.y+8,r:x.mkR,t:x.mkD,d:x.mkD}),x.mkS=.32,x.mkT=x.mkI,c.msg="Territory marked",c.msgT=.7,C(.02),R(.05),X(x.x,x.y+8,"#ffd56d",10,46),h(560,.04,"triangle",.02)),x.zt<=0)if(!f&&x.zcd<=0&&x.mkS<=0){if(x.zc=Math.min(x.zLoad,x.zc+t),x.zc>.25){const e=x.zc/x.zLoad;x.rx+=.9*(2*Math.random()-1)*e*60*t,x.ry+=.9*(2*Math.random()-1)*e*60*t,R(7e-4*e*60*t)}x.zc>=x.zLoad&&!x.zr&&(x.zr=1,c.msg="Zoomies ready: push to dash",c.msgT=1.1,R(.08),h(760,.05,"triangle",.024))}else if(x.zr){x.zt=x.zDur,x.zr=0,x.zc=0;const t=s||1;x.zx=n/t,x.zy=o/t,C(.04),R(.28),x.flash=.09,x.gx=x.zx,x.gy=x.zy,X(x.x,x.y,"#9dffea",18,120),h(980,.06,"square",.028)}else x.zc=0;if(x.zt>0){if(x.zt=Math.max(0,x.zt-t),f){x.zx=.85*x.zx+.15*n,x.zy=.85*x.zy+.15*o;const t=Math.hypot(x.zx,x.zy)||1;x.zx/=t,x.zy/=t}x.vx=x.zx*x.speed*x.zSpd,x.vy=x.zy*x.speed*x.zSpd,x.face=x.vx>=0?1:-1,x.rx-=8*x.zx*t*60,x.ry-=6*x.zy*t*60,Math.random()<.65&&K({x:x.x-b(-6,6),y:x.y-b(-6,6),vx:.12*-x.vx+b(-35,35),vy:.12*-x.vy+b(-35,35),t:b(.1,.25),c:"#8fffe5"}),x.zt<=0&&(x.zcd=x.zCool,c.msg="Zoomies cooling...",c.msgT=.65,h(420,.04,"triangle",.016))}else x.vx=n*x.speed,x.vy=o*x.speed,Math.abs(x.vx)>.5&&(x.face=x.vx>0?1:-1),x.mkS>0&&(x.vx=0,x.vy=0,x.rx+=.5*Math.sin(45*c.t),Math.random()<.7&&K({x:x.x+b(-5,5),y:x.y+10+b(-3,3),vx:b(-14,14),vy:b(6,30),t:b(.12,.26),c:"#ffd56d"}));x.x=k(x.x+x.vx*t,12,2588),x.y=k(x.y+x.vy*t,12,1788),x.fireCd-=t,x.fireCd<=0&&(x.fireCd=x.fireRate,function(){const t=function(){let t=0,e=1e9;for(let l=0;l<g.length;l++){const a=g[l],i=a.x-x.x,n=a.y-x.y,r=i*i+n*n;r<e&&(e=r,t=a)}return t}();if(!t)return;let e=t.x-x.x,l=t.y-x.y,a=Math.hypot(e,l)||1;if(a>x.range)return;e/=a,l/=a;const i=x.shots;for(let t=0;t<i;t++){const a=1===i?0:.18*(t-(i-1)/2),n=Math.cos(a),r=Math.sin(a),o=e*n-l*r,s=e*r+l*n;q({x:x.x,y:x.y,vx:520*o,vy:520*s,d:x.dmg,life:1.05,pier:1})}x.gx=e,x.gy=l,x.rx-=6*e,x.ry-=4*l,x.flash=.07,x.face=e>=0?1:-1,X(x.x+16*e,x.y+10*l,"#ffd56d",3,35),R(.025),h(640,.04,"square",.018)}()),c.spawnT-=t,c.spawnT<=0&&(c.spawnT=c.nextSpawn,c.nextSpawn=Math.max(.22,.9-.012*c.time),function(){if(g.length>=180)return;const t=Math.random()*Math.PI*2,e=b(360,560),l=1+.045*c.time,a=22+8*l+b(-4,8),i=56+6*l+b(-6,10),n=k(x.x+Math.cos(t)*e,20,2580),r=k(x.y+Math.sin(t)*e,20,1780);g.push({x:n,y:r,r:b(12,18),hp:a,s:i,dmg:8+.9*l,vx:0,vy:0,ht:0,sl:0})}());for(let e=u.length-1;e>=0;e--){const l=u[e];if(l.life-=t,l.x+=l.vx*t,l.y+=l.vy*t,l.life<=0||l.x<-20||l.y<-20||l.x>2620||l.y>1820)u.splice(e,1);else for(let t=g.length-1;t>=0;t--){const a=g[t],i=a.x-l.x,n=a.y-l.y;if(i*i+n*n<(a.r+3)*(a.r+3)&&(a.hp-=l.d,a.ht=.09,a.vx+=.07*l.vx,a.vy+=.07*l.vy,l.pier--,a.hp<=0&&H(t,"#ff9675",9,70),l.pier<0)){u.splice(e,1);break}}}let y=0,z=0,v=0;for(let e=g.length-1;e>=0;e--){const l=g[e],a=x.x-l.x,i=x.y-l.y,n=Math.hypot(a,i)||1;let r=1,o=0;for(let t=0;t<M.length;t++){const e=M[t],a=l.x-e.x,i=l.y-e.y;if(a*a+i*i<e.r*e.r){r=Math.min(r,1-x.mkSl),o=1;break}}if(l.sl=o,o&&(l.hp-=x.mkDo*t,l.ht=Math.max(l.ht,.08),l.hp<=0))H(e,"#f7d96b",8,60);else if(l.vx*=Math.max(0,1-8*t),l.vy*=Math.max(0,1-8*t),l.ht=Math.max(0,l.ht-t),l.x+=(a/n*l.s*r+l.vx)*t,l.y+=(i/n*l.s*r+l.vy)*t,n<l.r+x.r-1){if(x.zt>0){if(l.hp-=x.zDmg,l.ht=.12,l.vx+=280*x.zx,l.vy+=280*x.zy,z++,l.hp<=0){H(e,"#8fffe5",12,90,1),v++;continue}y+=.35*l.dmg;continue}y+=l.dmg}}var P;z>0&&(C(Math.min(.04,.012*z)),R(Math.min(.24,.04*z)),c.xpPulse=Math.min(.6,c.xpPulse+.06*z),h(260,.02,"square",.016),v>1&&h(310,.02,"square",.013)),y>0&&(P=y*t,x.zt>0&&(P*=x.zDr),x.hp-=P,R(.03),x.hp<=0&&(x.hp=0,c.dead=1,c.start=1,c.kills>c.best&&(c.best=0|c.kills,localStorage.ss_best=c.best),c.msg="You got swarmed",c.msgT=999,C(.09),R(.42),h(120,.22,"sawtooth",.05),X(x.x,x.y,"#ff6f89",26,130)));for(let e=S.length-1;e>=0;e--){const l=S[e],a=x.x-l.x,i=x.y-l.y,n=Math.hypot(a,i)||1;n<x.magnet&&(l.x+=a/n*240*t,l.y+=i/n*240*t),n<x.r+8&&(O(l.v),S.splice(e,1),c.xpPulse=Math.min(.5,c.xpPulse+.11),X(x.x,x.y,"#69f0c9",4,40))}(d.gr||m)&&Math.random()<.04&&c.time>2&&W({x:k(x.x+b(-20,20),12,2588),y:k(x.y+b(-20,20),12,1788),v:4,m:1,t:0})}(f),function(){const t=c.shake*c.shake,n=10*(2*Math.random()-1)*t,s=10*(2*Math.random()-1)*t;e.setTransform(i,0,0,i,n,s);const f=k(x.x-.5*l,0,2600-l),h=k(x.y-.5*a,0,1800-a),d=e.createLinearGradient(0,0,0,a);d.addColorStop(0,"#263f60"),d.addColorStop(.55,"#16273f"),d.addColorStop(1,"#0b111a"),e.fillStyle=d,e.fillRect(0,0,l,a),e.strokeStyle="rgba(63,96,132,.35)",e.lineWidth=1;const y=-f%56;for(let t=-h%56;t<a;t+=56)e.beginPath(),e.moveTo(0,0|t),e.lineTo(l,0|t),e.stroke();for(let t=y;t<l;t+=56)e.beginPath(),e.moveTo(0|t,0),e.lineTo(0|t,a),e.stroke();const b=r-f,R=900-h;e.fillStyle="rgba(105,240,201,.07)",e.beginPath(),e.arc(b,R,210,0,2*Math.PI),e.fill();for(let t=0;t<S.length;t++){const i=S[t],n=i.x-f,r=i.y-h;n<-10||r<-10||n>l+10||r>a+10||(e.fillStyle="#69f0c9",e.beginPath(),e.arc(n,r,5,0,2*Math.PI),e.fill(),e.fillStyle="#ceffef",e.fillRect(n-1|0,r-1|0,2,2))}for(let t=0;t<M.length;t++){const i=M[t],n=i.x-f,r=i.y-h;if(n<-i.r-20||r<-i.r-20||n>l+i.r+20||r>a+i.r+20)continue;const o=i.t/i.d;e.globalAlpha=.12+.1*o,e.fillStyle="#f4d96e",e.beginPath(),e.arc(n,r,i.r,0,2*Math.PI),e.fill(),e.globalAlpha=.2+.2*Math.sin(5*(c.t+t))*o,e.strokeStyle="#fff0a9",e.lineWidth=1.5,e.beginPath(),e.arc(n,r,.68*i.r+2*Math.sin(4*(c.t+t)),0,2*Math.PI),e.stroke(),e.globalAlpha=1}for(let t=0;t<g.length;t++){const i=g[t],n=i.x-f,r=i.y-h;n<-40||r<-40||n>l+40||r>a+40||(e.fillStyle=i.ht>0?"#9db4d1":i.sl?"#70805a":"#4b667f",e.beginPath(),e.arc(n,r,i.r,0,2*Math.PI),e.fill(),e.fillStyle="#f0627c",e.fillRect(n-4|0,r-2|0,3,3),e.fillRect(n+1|0,r-2|0,3,3))}e.fillStyle="#ffd56d";for(let t=0;t<u.length;t++){const l=u[t],a=l.x-f,i=l.y-h;e.fillRect(a-2|0,i-2|0,4,4)}const C=x.x-f+x.rx,D=x.y-h+x.ry,A=Math.abs(x.vx)>=Math.abs(x.vy)?x.face>0?o.e:o.w:x.vy<0?x.face>0?o.ne:o.nw:x.face>0?o.se:o.sw;if(e.fillStyle="rgba(0,0,0,.35)",e.beginPath(),e.ellipse(C,D+14,17,6,0,0,2*Math.PI),e.fill(),A&&A.complete?e.drawImage(A,C-22,D-18,44,30):(e.fillStyle="#0b0f14",e.beginPath(),e.arc(C,D,12,0,2*Math.PI),e.fill(),e.fillStyle="#ef4f6c",e.fillRect(C+3|0,D-6|0,7,3)),x.mkS>0&&x.zt<=0){const t=x.face>0?-1:1,l=k(x.mkS/.32,0,1),a=C+13*t,i=D+8,n=a+t*(11+2.2*Math.sin(36*c.t)),r=i+7+1.1*Math.sin(22*c.t);e.strokeStyle="rgba(248,220,112,"+(.38+.45*l)+")",e.lineWidth=2,e.beginPath(),e.moveTo(a,i),e.quadraticCurveTo(.5*(a+n),i+2,n,r),e.stroke(),e.fillStyle="rgba(250,214,103,.72)",e.beginPath(),e.arc(n+2*t,r+2,2.1,0,2*Math.PI),e.fill(),e.fillStyle="rgba(244,205,93,.38)",e.beginPath(),e.ellipse(n+5*t,r+7,5.2,2.7,0,0,2*Math.PI),e.fill()}if((x.zc>0||x.zcd>0)&&x.zt<=0){const t=x.zcd>0?0:Math.min(1,x.zc/x.zLoad),l=t<=0?Math.max(0,1-x.zcd/x.zCool):0,a=18+8*t+1.2*Math.sin(22*c.t);e.strokeStyle=x.zr?"#8fffe5":"#ffd56d",e.lineWidth=2+1.8*t,e.beginPath(),e.arc(C,D,a,.5*-Math.PI,.5*-Math.PI+2*Math.PI*t),e.stroke(),x.zcd>0&&(e.strokeStyle="rgba(158,200,255,.7)",e.lineWidth=2,e.beginPath(),e.arc(C,D,16,.5*-Math.PI,.5*-Math.PI+2*Math.PI*l),e.stroke())}if(x.zt>0){const t=x.zt/2;e.strokeStyle="rgba(143,255,229,.7)",e.lineWidth=2.5,e.beginPath(),e.arc(C,D,20+2*Math.sin(30*c.t)+4*t,0,2*Math.PI),e.stroke(),e.fillStyle="rgba(143,255,229,.16)",e.beginPath(),e.ellipse(C-10*x.zx,D-7*x.zy,20,10,Math.atan2(x.zy,x.zx),0,2*Math.PI),e.fill()}x.flash>0&&(e.globalAlpha=x.flash/.07,e.fillStyle="#ffe598",e.beginPath(),e.moveTo(C+16*x.gx,D+8*x.gy),e.lineTo(C+24*x.gx-5*x.gy,D+24*x.gy+4*x.gx),e.lineTo(C+24*x.gx+5*x.gy,D+24*x.gy-4*x.gx),e.closePath(),e.fill(),e.globalAlpha=1);for(let t=0;t<T.length;t++){const i=T[t],n=i.x-f,r=i.y-h;n<-8||r<-8||n>l+8||r>a+8||(e.globalAlpha=Math.max(0,Math.min(1,2.4*i.t)),e.fillStyle=i.c,e.fillRect(0|n,0|r,3,3))}e.globalAlpha=1;const L=44,E=l-18-L;if(e.fillStyle="rgba(7,10,16,.76)",e.fillRect(10,10,l-20,104),e.fillStyle="#eef4ff",e.font="700 17px Trebuchet MS,sans-serif",e.fillText("SCOTTY SURVIVAL",20,32),e.font="600 14px Trebuchet MS,sans-serif",e.fillStyle="#9ec8ff",e.fillText("Time "+c.time.toFixed(1)+"s",20,54),e.fillStyle="#ffd56d",e.fillText("Kills "+c.kills,120,54),e.fillStyle="#69f0c9",e.fillText("Level "+c.level,200,54),e.fillStyle="#dce8ff",e.fillText("Best "+c.best,l-172,54),e.fillStyle="#2a3346",e.fillRect(20,62,l-190,10),e.fillStyle="#ef4f6c",e.fillRect(20,62,(l-190)*(x.hp/x.maxHp),10),e.fillStyle="#24374d",e.fillRect(20,74,l-190,8),e.fillStyle="#69f0c9",e.fillRect(20,74,(l-190)*(c.xp/c.nextXp),8),c.start&&!c.dead){const t=(t,l,a,i,n,r)=>{e.fillStyle="rgba(8,12,19,.92)",e.fillRect(E,t,L,L),e.strokeStyle=i?l:"rgba(129,157,187,.7)",e.lineWidth=2,e.strokeRect(E+.5,t+.5,43,43),e.strokeStyle="rgba(72,88,109,.85)",e.lineWidth=3,e.beginPath(),e.arc(E+22,t+22,14.96,0,2*Math.PI),e.stroke(),e.strokeStyle=l,e.beginPath(),e.arc(E+22,t+22,14.96,.5*-Math.PI,.5*-Math.PI+2*Math.PI*k(a,0,1)),e.stroke(),e.fillStyle=l,r<1?(e.beginPath(),e.moveTo(E+21.56,t+8.36),e.lineTo(E+.35*L,t+23.32),e.lineTo(E+21.56,t+23.32),e.lineTo(E+17.16,t+36.08),e.lineTo(E+29.48,t+18.04),e.lineTo(E+22.44,t+18.04),e.closePath(),e.fill()):(e.beginPath(),e.arc(E+22,t+19.36,4.4,0,2*Math.PI),e.fill(),e.beginPath(),e.moveTo(E+22,t+8.8),e.bezierCurveTo(E+30.36,t+19.8,E+28.16,t+29.48,E+22,t+34.32),e.bezierCurveTo(E+15.84,t+29.48,E+13.64,t+19.8,E+22,t+8.8),e.fill()),n>0?(e.fillStyle="#dce8ff",e.font="700 10px Trebuchet MS,sans-serif",e.fillText(n.toFixed(1)+"s",E+8,t+L-6)):i&&(e.fillStyle="rgba(255,255,255,.8)",e.beginPath(),e.arc(E+L-8,t+8,3,0,2*Math.PI),e.fill())};t(14,"#8fffe5",x.zcd>0?1-x.zcd/x.zCool:x.zr?1:x.zc/x.zLoad,x.zt>0,x.zcd>0?x.zcd:0,0),t(66,"#f4d96e",x.mkT>0?1-x.mkT/x.mkI:1,x.mkS>0,x.mkT>0?x.mkT:0,1)}if(c.msgT>0&&(e.fillStyle="rgba(8,12,19,.74)",e.fillRect(14,108,l-28,28),e.fillStyle="#d7ffe8",e.font="600 13px Trebuchet MS,sans-serif",e.fillText(c.msg,22,127)),c.start&&!c.dead&&!c.lvup){const t=p.x+p.tx,l=p.y+p.ty;e.fillStyle="rgba(7,11,17,.42)",e.beginPath(),e.arc(p.x,p.y,p.r+8,0,2*Math.PI),e.fill(),e.strokeStyle="rgba(158,200,255,.45)",e.lineWidth=2,e.beginPath(),e.arc(p.x,p.y,p.r,0,2*Math.PI),e.stroke(),e.fillStyle="rgba(105,240,201,"+(m?.65:.42)+")",e.beginPath(),e.arc(t,l,p.kr,0,2*Math.PI),e.fill(),e.strokeStyle="rgba(220,248,255,.65)",e.lineWidth=1.5,e.beginPath(),e.arc(t,l,p.kr,0,2*Math.PI),e.stroke()}if(c.start||(e.fillStyle="rgba(6,9,14,.86)",e.fillRect(20,.19*a,l-40,.62*a),e.fillStyle="#fff",e.font="700 34px Trebuchet MS,sans-serif",e.fillText("SCOTTY VS ZOMBIES",.5*l-162,.34*a),e.fillStyle="#d8e6ff",e.font="600 18px Trebuchet MS,sans-serif",e.fillText("Auto-shoot survival with level-ups",.5*l-145,.43*a),e.fillText("Eat mints to gain XP and level up",.5*l-136,.49*a),e.fillText("Touch: use left thumb joystick",.5*l-124,.56*a),e.fillText("Zoomies: center/release stick to charge",.5*l-164,.59*a),e.fillText("Then push any direction to dash",.5*l-118,.62*a),e.fillText("Territory: auto-mark creates slowing puddles",.5*l-158,.65*a),e.fillText("Keyboard: WASD move, E hold, 1/2/3 read page",.5*l-172,.69*a),e.fillStyle="#69f0c9",e.font="700 24px Trebuchet MS,sans-serif",e.fillText("Tap or press Space to start",.5*l-136,.77*a)),c.lvup&&!c.dead){e.fillStyle="rgba(6,10,15,.2)",e.fillRect(0,0,l,a);const t=P(),i=t.bx,n=t.by,r=t.bw,s=t.bh,f=t.rects,h=t.mobile;e.fillStyle="rgba(13,20,31,.94)",v(i,n,r,s,18),e.fill(),e.strokeStyle="#425e82",e.lineWidth=1.5,v(i+.5,n+.5,r-1,s-1,18),e.stroke(),e.fillStyle="#ecf3ff",e.font=(h?"700 20px":"700 22px")+" Trebuchet MS,sans-serif",e.fillText("SCOTTY'S SKILL BOOK",i+14,n+29),e.fillStyle="#9ec8ff",e.font="600 12px Trebuchet MS,sans-serif",e.fillText("Choose one page",i+14,n+45);const x=o.e,d=h?42:52,y=h?30:36;x&&x.complete&&e.drawImage(x,i+r-d-12,n+10,d,y),e.fillStyle="rgba(10,15,23,.84)",v(i+12,n+53,r-24,s-74,12),e.fill();for(let t=0;t<3;t++){const l=c.choices[t],a=f[t],i=.9+.1*z(k((c.cardT-.07*t)/.28,0,1)),n=a.x+.5*a.w,r=a.y+.5*a.h,o=I(l?l.n:"");if(e.save(),e.translate(n,r),e.scale(i,i),e.translate(-n,-r),e.fillStyle="#eef4ff",v(a.x,a.y,a.w,a.h,10),e.fill(),e.strokeStyle="#b8c8de",e.lineWidth=1.2,v(a.x+.5,a.y+.5,a.w-1,a.h-1,10),e.stroke(),e.fillStyle="rgba(50,73,101,.12)",e.fillRect(a.x+44,a.y+9,1,a.h-18),e.fillStyle="#dbe6f7",e.beginPath(),e.arc(a.x+24,a.y+.5*a.h,14,0,2*Math.PI),e.fill(),e.fillStyle="#2f4663",e.font="700 16px Segoe UI Emoji,Apple Color Emoji,Trebuchet MS,sans-serif",e.fillText(o,a.x+16,a.y+.5*a.h+6),e.fillStyle="#4f6381",e.font="700 10px Trebuchet MS,sans-serif",e.fillText("PAGE "+(t+1),a.x+54,a.y+17),l){let i=h?16:17;for(;i>12&&(e.font="700 "+i+"px Trebuchet MS,sans-serif",!(e.measureText(l.n).width<=a.w-126));i--);e.fillStyle="#1e2f45",e.fillText(l.n,a.x+54,a.y+39),e.fillStyle="#425771",e.font="600 12px Trebuchet MS,sans-serif",w(l.d,a.x+52,a.y+58,a.w-122,14,h?2:3),e.fillStyle="#2d4563",v(a.x+a.w-64,a.y+10,52,21,7),e.fill(),e.fillStyle="#e7f4ff",e.font="700 11px Trebuchet MS,sans-serif",e.fillText("READ "+(t+1),a.x+a.w-58,a.y+24)}e.restore()}e.fillStyle="#95bce8",e.font="600 12px Trebuchet MS,sans-serif",e.fillText("Tap a page or press 1/2/3",i+14,n+s-12)}c.dead&&(e.fillStyle="rgba(5,8,13,.86)",e.fillRect(24,.24*a,l-48,.5*a),e.fillStyle="#ff8298",e.font="700 33px Trebuchet MS,sans-serif",e.fillText("GAME OVER",.5*l-98,.38*a),e.fillStyle="#dce8ff",e.font="600 20px Trebuchet MS,sans-serif",e.fillText("Kills "+c.kills,.5*l-43,.47*a),e.fillText("Best "+c.best,.5*l-37,.53*a),e.fillStyle="#69f0c9",e.font="700 24px Trebuchet MS,sans-serif",e.fillText("Tap or press Space to retry",.5*l-139,.65*a))}(),requestAnimationFrame(t)})})();</script></body></html>