<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"><title>Scotty Survival</title><style>:root{--bg:#0a0d12;--sky:#1a2940;--ink:#ecf3ff;--red:#ef4f6c;--mint:#69f0c9;--gold:#ffd56d;--line:#2f4868}*{box-sizing:border-box}html,body{margin:0;width:100%;height:100%;overflow:hidden;background:var(--bg);color:var(--ink);font-family:Trebuchet MS,Avenir Next,Segoe UI,sans-serif}body{touch-action:none}canvas{display:block;width:100%;height:100%}</style></head><body><canvas id="c"></canvas><script>(()=>{const t=document.getElementById("c"),e=t.getContext("2d");let l=360,i=740,a=1,n=0;const r=1300,s={};function o(t){const e=new Image;return e.src="black_scottish_terrier_dog_with_red_scarf/rotations/"+t+".png",e}s.e=o("east"),s.w=o("west"),s.ne=o("north-east"),s.nw=o("north-west"),s.se=o("south-east"),s.sw=o("south-west");let f=0;function h(t,e,l,i){if(!f)return;const a=f.createOscillator(),n=f.createGain();a.type=l||"triangle",a.frequency.value=t,n.gain.value=i||.02,n.gain.exponentialRampToValueAtTime(1e-4,f.currentTime+e),a.connect(n).connect(f.destination),a.start(),a.stop(f.currentTime+e)}const c={start:0,dead:0,lvup:0,t:0,time:0,kills:0,spawnT:0,nextSpawn:.8,msg:"",msgT:0,midSeen:0,level:1,xp:0,nextXp:24,stop:0,shake:0,xpPulse:0,cardT:0,best:+localStorage.ss_best||0,choices:[]},d={x:260,y:900,vx:0,vy:0,r:15,hp:100,maxHp:100,speed:185,fireCd:0,fireRate:.46,dmg:12,range:560,shots:1,magnet:88,face:1,rx:0,ry:0,flash:0,gx:1,gy:0,zc:0,zr:0,zt:0,zx:1,zy:0,zcd:0,zDur:1,zSpd:2.1,zLoad:1.5,zCool:5.5,zDmg:24,zDr:.55,mkT:0,mkI:8.8,mkS:0,mkD:14,mkR:54,mkSl:.5,mkDo:12},x={l:0,r:0,u:0,d:0,gr:0};let y=-1,m=0;const g={x:78,y:0,r:42,kr:16,tx:0,ty:0,ax:0,ay:0},p=[],u=[],M=[],S=[],T=[];function b(t,e){return t+Math.random()*(e-t)}function k(t,e,l){return t<e?e:t>l?l:t}function z(t){const e=t-1;return 1+2.70158*e*e*e+1.70158*e*e}function v(t,l,i,a,n){const r=Math.max(0,Math.min(n,.5*Math.min(i,a)));e.beginPath(),e.moveTo(t+r,l),e.lineTo(t+i-r,l),e.quadraticCurveTo(t+i,l,t+i,l+r),e.lineTo(t+i,l+a-r),e.quadraticCurveTo(t+i,l+a,t+i-r,l+a),e.lineTo(t+r,l+a),e.quadraticCurveTo(t,l+a,t,l+a-r),e.lineTo(t,l+r),e.quadraticCurveTo(t,l,t+r,l),e.closePath()}function P(){const t=l<560,e=t?l-14:Math.min(l-20,620),a=t?k(.48*i,296,390):k(.4*i,268,340),n=.5*(l-e),r=i-a-12,s=[];if(t){const t=8,l=e-22,i=Math.max(74,Math.min(100,(a-84-2*t)/3)),o=r+50;for(let e=0;e<3;e++)s.push({x:n+14,y:o+e*(i+t),w:l,h:i})}else{const t=10,l=(e-32-2*t)/3,i=Math.max(102,Math.min(130,a-82)),o=r+52;for(let e=0;e<3;e++)s.push({x:n+16+e*(l+t),y:o,w:l,h:i})}return{mobile:t,bx:n,by:r,bw:e,bh:a,rects:s}}function w(t,l,i,a,n,r){const s=t.split(" ");let o="",f=0;for(let t=0;t<s.length;t++){const h=o?o+" "+s[t]:s[t];if(e.measureText(h).width<=a)o=h;else{if(e.fillText(o,l,i+f*n),f++,f>=r)return;o=s[t]}}f<r&&o&&e.fillText(o,l,i+f*n)}function I(t){return t.includes("Zoomies")?"âš¡":t.includes("Territory")?"ðŸ’§":t.includes("Rapid Fire")?"ðŸ”¥":t.includes("Big Bites")?"ðŸ¦·":t.includes("Speed Paws")?"ðŸ’¨":t.includes("Extra Shot")?"ðŸŽ¯":t.includes("Long Reach")?"ðŸ“¡":t.includes("Snack Magnet")?"ðŸ§²":t.includes("Tough Fur")?"ðŸ›¡ï¸":t.includes("Quick Heal")?"ðŸ’š":"â­"}function R(t){c.shake=k(c.shake+t,0,1.3)}function C(t){c.stop=Math.max(c.stop,t)}function D(){a=Math.max(1,Math.min(2,devicePixelRatio||1)),l=Math.max(320,0|innerWidth),i=Math.max(560,0|innerHeight),t.width=l*a|0,t.height=i*a|0,e.setTransform(a,0,0,a,0,0),e.imageSmoothingEnabled=!1,g.y=i-88}function A(t,e){const l=t-g.x,i=e-g.y;return l*l+i*i<1.8*g.r*(1.8*g.r)}function L(t,e){let l=t-g.x,i=e-g.y;const a=Math.hypot(l,i)||1,n=g.r;a<10?(l=0,i=0):a>n&&(l=l/a*n,i=i/a*n),g.tx=l,g.ty=i,g.ax=l/n,g.ay=i/n}function E(){g.tx=0,g.ty=0,g.ax=0,g.ay=0}function K(t){T.length>=420||T.push(t)}function W(t){M.length>=260||M.push(t)}function q(t){u.length>=260||u.push(t)}function X(t,e,l,i,a){const n=p.length>130?.5:p.length>90?.7:1,r=Math.max(1,i*n|0);for(let i=0;i<r;i++){const i=Math.random()*Math.PI*2,n=(a||70)*(.4+Math.random());K({x:t,y:e,vx:Math.cos(i)*n,vy:Math.sin(i)*n,t:b(.2,.6),c:l})}}function H(t,e,l,i,a){const n=p[t],r=!!a;c.kills++,r?X(n.x,n.y,e||"#ff9675",Math.max(2,.35*(l||9)|0),Math.max(20,.6*(i||70))):(C(.03),R(.08),X(n.x,n.y,e||"#ff9675",l||9,i||70),h(280,.03,"square",.012));const s=260-M.length;if(s>0){const t=r?Math.random()<.25?1:0:1+(Math.random()<.4?1:0);for(let e=0;e<Math.min(t,s);e++)W({x:n.x+b(-7,7),y:n.y+b(-7,7),v:0|b(5,8),m:1,t:0})}p.splice(t,1)}function B(t){if(c.dead=0,c.lvup=0,c.t=0,c.time=0,c.spawnT=0,c.nextSpawn=.8,c.kills=0,c.msg="",c.msgT=0,c.midSeen=0,c.level=1,c.xp=0,c.nextXp=24,c.stop=0,c.shake=0,c.xpPulse=0,c.cardT=0,c.choices=[],d.x=260,d.y=900,d.vx=0,d.vy=0,d.hp=100,d.maxHp=100,d.speed=185,d.fireCd=0,d.fireRate=.46,d.dmg=12,d.range=560,d.shots=1,d.magnet=88,d.face=1,d.rx=0,d.ry=0,d.flash=0,d.gx=1,d.gy=0,d.zc=0,d.zr=0,d.zt=0,d.zx=1,d.zy=0,d.zcd=0,d.zDur=1,d.zSpd=2.1,d.zLoad=1.5,d.zCool=5.5,d.zDmg=24,d.zDr=.55,d.mkT=5.2,d.mkI=8.8,d.mkS=0,d.mkD=14,d.mkR=54,d.mkSl=.5,d.mkDo=12,p.length=0,u.length=0,M.length=0,S.length=0,T.length=0,x.l=x.r=x.u=x.d=x.gr=0,m=0,E(),t){for(let t=0;t<24;t++)W({x:r+b(-120,120),y:900+b(-120,120),v:7,m:1,t:0});for(let t=0;t<10;t++)W({x:330+58*t,y:900+b(-60,60),v:5,m:1,t:0})}}function F(t){for(c.xp+=t;c.xp>=c.nextXp;){c.xp-=c.nextXp,c.level++,c.nextXp=1.36*c.nextXp+9|0,_(),c.lvup=1,c.cardT=0,c.xpPulse=.65,c.msg="Level up! Open the skill book",c.msgT=2.1,C(.06),R(.2),h(860,.08,"triangle",.03);break}}const Y=[{n:"Rapid Fire",d:"Shoot faster",f:()=>d.fireRate=Math.max(.15,.84*d.fireRate)},{n:"Big Bites",d:"+6 damage",f:()=>d.dmg+=6},{n:"Speed Paws",d:"+24 move speed",f:()=>d.speed+=24},{n:"Extra Shot",d:"+1 bullet",f:()=>d.shots=Math.min(5,d.shots+1)},{n:"Long Reach",d:"+120 range",f:()=>d.range+=120},{n:"Snack Magnet",d:"+30 pickup radius",f:()=>d.magnet+=30},{n:"Tough Fur",d:"+25 max hp",f:()=>{d.maxHp+=25,d.hp=Math.min(d.maxHp,d.hp+25)}},{n:"Quick Heal",d:"Heal 35 hp",f:()=>d.hp=Math.min(d.maxHp,d.hp+35)},{n:"Zoomies Time",d:"+0.25s zoomies",f:()=>d.zDur=Math.min(2.6,d.zDur+.25)},{n:"Zoomies CD",d:"-0.7s cooldown",f:()=>d.zCool=Math.max(1.4,d.zCool-.7)},{n:"Zoomies Speed",d:"+0.35x dash speed",f:()=>d.zSpd=Math.min(4,d.zSpd+.35)},{n:"Zoomies Charge",d:"-0.2s load time",f:()=>d.zLoad=Math.max(.55,d.zLoad-.2)},{n:"Territory CD",d:"-0.55s marking cooldown",f:()=>d.mkI=Math.max(3.2,d.mkI-.55)},{n:"Territory Radius",d:"+12 puddle radius",f:()=>d.mkR=Math.min(110,d.mkR+12)},{n:"Territory Duration",d:"+4s puddle life",f:()=>d.mkD=Math.min(40,d.mkD+4)},{n:"Territory Potency",d:"+8 dps and +10% slow",f:()=>{d.mkDo=Math.min(46,d.mkDo+8),d.mkSl=Math.min(.85,d.mkSl+.1)}}];function _(){const t=Y.slice();c.choices=[];for(let e=0;e<3&&t.length;e++){const e=Math.random()*t.length|0;c.choices.push(t[e]),t.splice(e,1)}}function O(t){c.lvup&&c.choices[t]&&(c.choices[t].f(),c.lvup=0,c.msg=c.choices[t].n+" applied",c.msgT=1.4,c.xpPulse=.25,R(.08),X(d.x,d.y,"#69f0c9",12,90))}function Z(){f||(f=new(window.AudioContext||window.webkitAudioContext)),c.start||(c.start=1,B(1),h(430,.05,"triangle",.02))}function U(e){y===e.pointerId&&(m=0,E(),t.hasPointerCapture(y)&&t.releasePointerCapture(y),y=-1)}addEventListener("resize",D),addEventListener("keydown",function(t){const e=t.code;if("Space"!==e&&"ArrowUp"!==e&&"ArrowDown"!==e&&"ArrowLeft"!==e&&"ArrowRight"!==e||t.preventDefault(),"Space"!==e&&"Enter"!==e||Z(),c.dead&&("Space"===e||"Enter"===e||"KeyR"===e))return B(1),void h(360,.05,"triangle",.02);c.lvup?"Digit1"===e?O(0):"Digit2"===e?O(1):"Digit3"===e&&O(2):c.start&&!c.dead&&("KeyA"===e||"ArrowLeft"===e?x.l=1:"KeyD"===e||"ArrowRight"===e?x.r=1:"KeyW"===e||"ArrowUp"===e?x.u=1:"KeyS"===e||"ArrowDown"===e?x.d=1:"KeyE"!==e&&"ShiftLeft"!==e&&"ShiftRight"!==e||(x.gr=1))}),addEventListener("keyup",function(t){const e=t.code;"KeyA"===e||"ArrowLeft"===e?x.l=0:"KeyD"===e||"ArrowRight"===e?x.r=0:"KeyW"===e||"ArrowUp"===e?x.u=0:"KeyS"===e||"ArrowDown"===e?x.d=0:"KeyE"!==e&&"ShiftLeft"!==e&&"ShiftRight"!==e||(x.gr=0)}),t.addEventListener("pointerdown",function(e){if(!(y>=0&&y!==e.pointerId)){if(y=e.pointerId,t.setPointerCapture(y),Z(),c.dead)return B(1),void h(360,.05,"triangle",.02);c.lvup?function(t,e){if(!c.lvup)return;const l=P().rects;for(let i=0;i<l.length;i++){const a=l[i];if(t>=a.x&&t<=a.x+a.w&&e>=a.y&&e<=a.y+a.h){O(i);break}}}(e.clientX,e.clientY):A(e.clientX,e.clientY)&&(m=1,L(e.clientX,e.clientY))}},{passive:1}),t.addEventListener("pointermove",function(t){y!==t.pointerId||!c.start||c.dead||c.lvup||(m||A(t.clientX,t.clientY))&&(m=1,L(t.clientX,t.clientY))},{passive:1}),t.addEventListener("pointerup",U,{passive:1}),t.addEventListener("pointercancel",U,{passive:1}),D(),B(1),requestAnimationFrame(function t(o){n||(n=o);let f=.001*(o-n);n=o,f=Math.max(0,Math.min(.034,f)),function(t){const e=t;c.msgT>0&&(c.msgT-=e),c.stop>0&&(c.stop=Math.max(0,c.stop-e),t*=.06),c.shake>0&&(c.shake=Math.max(0,c.shake-2.2*e)),c.xpPulse>0&&(c.xpPulse=Math.max(0,c.xpPulse-1.7*e)),d.flash>0&&(d.flash=Math.max(0,d.flash-7*e)),d.rx*=Math.max(0,1-18*e),d.ry*=Math.max(0,1-18*e),d.zcd>0&&(d.zcd=Math.max(0,d.zcd-e)),d.mkS>0&&(d.mkS=Math.max(0,d.mkS-e)),d.mkT>0&&d.zt<=0&&(d.mkT=Math.max(0,d.mkT-e));for(let e=S.length-1;e>=0;e--){const l=S[e];l.t-=t,l.t<=0&&S.splice(e,1)}for(let e=T.length-1;e>=0;e--){const l=T[e];l.t-=t,l.x+=l.vx*t,l.y+=l.vy*t,l.vy+=480*t,l.t<=0&&T.splice(e,1)}if(!c.start||c.dead)return;if(c.lvup)return void(c.cardT=Math.min(.9,c.cardT+e));c.t+=t,c.time+=t,!c.midSeen&&Math.hypot(d.x-r,d.y-900)<200&&(c.midSeen=1,c.msg='"what the dog doing?" by some human.',c.msgT=3.2,h(520,.05,"triangle",.02));const l=(x.r?1:0)-(x.l?1:0),i=(x.d?1:0)-(x.u?1:0),a=Math.hypot(g.ax,g.ay);let n=l,s=i;m&&a>.12&&(n+=g.ax,s+=g.ay);let o=Math.hypot(n,s);o>1&&(n/=o,s/=o);const f=(Math.hypot(l,i)>.05||m&&a>.12)&&d.mkS<=0;if(d.mkT<=0&&d.mkS<=0&&d.zt<=0&&d.zr<=0&&d.zc<=0&&(S.length>=18&&S.shift(),S.push({x:d.x+4*d.gx,y:d.y+8,r:d.mkR,t:d.mkD,d:d.mkD}),d.mkS=.32,d.mkT=d.mkI,c.msg="Territory marked",c.msgT=.7,C(.02),R(.05),X(d.x,d.y+8,"#ffd56d",10,46),h(560,.04,"triangle",.02)),d.zt<=0)if(!f&&d.zcd<=0&&d.mkS<=0){if(d.zc=Math.min(d.zLoad,d.zc+t),d.zc>.25){const e=d.zc/d.zLoad;d.rx+=.9*(2*Math.random()-1)*e*60*t,d.ry+=.9*(2*Math.random()-1)*e*60*t,R(7e-4*e*60*t)}d.zc>=d.zLoad&&!d.zr&&(d.zr=1,c.msg="Zoomies ready: push to dash",c.msgT=1.1,R(.08),h(760,.05,"triangle",.024))}else if(d.zr){d.zt=d.zDur,d.zr=0,d.zc=0;const t=o||1;d.zx=n/t,d.zy=s/t,C(.04),R(.28),d.flash=.09,d.gx=d.zx,d.gy=d.zy,X(d.x,d.y,"#9dffea",18,120),h(980,.06,"square",.028)}else d.zc=0;if(d.zt>0){if(d.zt=Math.max(0,d.zt-t),f){d.zx=.85*d.zx+.15*n,d.zy=.85*d.zy+.15*s;const t=Math.hypot(d.zx,d.zy)||1;d.zx/=t,d.zy/=t}d.vx=d.zx*d.speed*d.zSpd,d.vy=d.zy*d.speed*d.zSpd,d.face=d.vx>=0?1:-1,d.rx-=8*d.zx*t*60,d.ry-=6*d.zy*t*60,Math.random()<.65&&K({x:d.x-b(-6,6),y:d.y-b(-6,6),vx:.12*-d.vx+b(-35,35),vy:.12*-d.vy+b(-35,35),t:b(.1,.25),c:"#8fffe5"}),d.zt<=0&&(d.zcd=d.zCool,c.msg="Zoomies cooling...",c.msgT=.65,h(420,.04,"triangle",.016))}else d.vx=n*d.speed,d.vy=s*d.speed,Math.abs(d.vx)>.5&&(d.face=d.vx>0?1:-1),d.mkS>0&&(d.vx=0,d.vy=0,d.rx+=.5*Math.sin(45*c.t),Math.random()<.7&&K({x:d.x+b(-5,5),y:d.y+10+b(-3,3),vx:b(-14,14),vy:b(6,30),t:b(.12,.26),c:"#ffd56d"}));d.x=k(d.x+d.vx*t,12,2588),d.y=k(d.y+d.vy*t,12,1788),d.fireCd-=t,d.fireCd<=0&&(d.fireCd=d.fireRate,function(){const t=function(){let t=0,e=1e9;for(let l=0;l<p.length;l++){const i=p[l],a=i.x-d.x,n=i.y-d.y,r=a*a+n*n;r<e&&(e=r,t=i)}return t}();if(!t)return;let e=t.x-d.x,l=t.y-d.y,i=Math.hypot(e,l)||1;if(i>d.range)return;e/=i,l/=i;const a=d.shots;for(let t=0;t<a;t++){const i=1===a?0:.18*(t-(a-1)/2),n=Math.cos(i),r=Math.sin(i),s=e*n-l*r,o=e*r+l*n;q({x:d.x,y:d.y,vx:520*s,vy:520*o,d:d.dmg,life:1.05,pier:1})}d.gx=e,d.gy=l,d.rx-=6*e,d.ry-=4*l,d.flash=.07,d.face=e>=0?1:-1,X(d.x+16*e,d.y+10*l,"#ffd56d",3,35),R(.025),h(640,.04,"square",.018)}()),c.spawnT-=t,c.spawnT<=0&&(c.spawnT=c.nextSpawn,c.nextSpawn=Math.max(.22,.9-.012*c.time),function(){if(p.length>=180)return;const t=Math.random()*Math.PI*2,e=b(360,560),l=1+.045*c.time,i=22+8*l+b(-4,8),a=56+6*l+b(-6,10),n=k(d.x+Math.cos(t)*e,20,2580),r=k(d.y+Math.sin(t)*e,20,1780);p.push({x:n,y:r,r:b(12,18),hp:i,s:a,dmg:8+.9*l,vx:0,vy:0,ht:0,sl:0})}());for(let e=u.length-1;e>=0;e--){const l=u[e];if(l.life-=t,l.x+=l.vx*t,l.y+=l.vy*t,l.life<=0||l.x<-20||l.y<-20||l.x>2620||l.y>1820)u.splice(e,1);else for(let t=p.length-1;t>=0;t--){const i=p[t],a=i.x-l.x,n=i.y-l.y;if(a*a+n*n<(i.r+3)*(i.r+3)&&(i.hp-=l.d,i.ht=.09,i.vx+=.07*l.vx,i.vy+=.07*l.vy,l.pier--,i.hp<=0&&H(t,"#ff9675",9,70),l.pier<0)){u.splice(e,1);break}}}let y=0,z=0,v=0;for(let e=p.length-1;e>=0;e--){const l=p[e],i=d.x-l.x,a=d.y-l.y,n=Math.hypot(i,a)||1;let r=1,s=0;for(let t=0;t<S.length;t++){const e=S[t],i=l.x-e.x,a=l.y-e.y;if(i*i+a*a<e.r*e.r){r=Math.min(r,1-d.mkSl),s=1;break}}if(l.sl=s,s&&(l.hp-=d.mkDo*t,l.ht=Math.max(l.ht,.08),l.hp<=0))H(e,"#f7d96b",8,60);else if(l.vx*=Math.max(0,1-8*t),l.vy*=Math.max(0,1-8*t),l.ht=Math.max(0,l.ht-t),l.x+=(i/n*l.s*r+l.vx)*t,l.y+=(a/n*l.s*r+l.vy)*t,n<l.r+d.r-1){if(d.zt>0){if(l.hp-=d.zDmg,l.ht=.12,l.vx+=280*d.zx,l.vy+=280*d.zy,z++,l.hp<=0){H(e,"#8fffe5",12,90,1),v++;continue}y+=.35*l.dmg;continue}y+=l.dmg}}var P;z>0&&(C(Math.min(.04,.012*z)),R(Math.min(.24,.04*z)),c.xpPulse=Math.min(.6,c.xpPulse+.06*z),h(260,.02,"square",.016),v>1&&h(310,.02,"square",.013)),y>0&&(P=y*t,d.zt>0&&(P*=d.zDr),d.hp-=P,R(.03),d.hp<=0&&(d.hp=0,c.dead=1,c.start=1,c.kills>c.best&&(c.best=0|c.kills,localStorage.ss_best=c.best),c.msg="You got swarmed",c.msgT=999,C(.09),R(.42),h(120,.22,"sawtooth",.05),X(d.x,d.y,"#ff6f89",26,130)));for(let e=M.length-1;e>=0;e--){const l=M[e],i=d.x-l.x,a=d.y-l.y,n=Math.hypot(i,a)||1;n<d.magnet&&(l.x+=i/n*240*t,l.y+=a/n*240*t),n<d.r+8&&(F(l.v),M.splice(e,1),c.xpPulse=Math.min(.5,c.xpPulse+.11),X(d.x,d.y,"#69f0c9",4,40))}(x.gr||m)&&Math.random()<.04&&c.time>2&&W({x:k(d.x+b(-20,20),12,2588),y:k(d.y+b(-20,20),12,1788),v:4,m:1,t:0})}(f),function(){const t=c.shake*c.shake,n=10*(2*Math.random()-1)*t,o=10*(2*Math.random()-1)*t;e.setTransform(a,0,0,a,n,o);const f=k(d.x-.5*l,0,2600-l),h=k(d.y-.5*i,0,1800-i),x=e.createLinearGradient(0,0,0,i);x.addColorStop(0,"#263f60"),x.addColorStop(.55,"#16273f"),x.addColorStop(1,"#0b111a"),e.fillStyle=x,e.fillRect(0,0,l,i),e.strokeStyle="rgba(63,96,132,.35)",e.lineWidth=1;const y=-f%56;for(let t=-h%56;t<i;t+=56)e.beginPath(),e.moveTo(0,0|t),e.lineTo(l,0|t),e.stroke();for(let t=y;t<l;t+=56)e.beginPath(),e.moveTo(0|t,0),e.lineTo(0|t,i),e.stroke();const b=r-f,R=900-h;e.fillStyle="rgba(105,240,201,.07)",e.beginPath(),e.arc(b,R,210,0,2*Math.PI),e.fill();for(let t=0;t<M.length;t++){const a=M[t],n=a.x-f,r=a.y-h;n<-10||r<-10||n>l+10||r>i+10||(e.fillStyle="#69f0c9",e.beginPath(),e.arc(n,r,5,0,2*Math.PI),e.fill(),e.fillStyle="#ceffef",e.fillRect(n-1|0,r-1|0,2,2))}for(let t=0;t<S.length;t++){const a=S[t],n=a.x-f,r=a.y-h;if(n<-a.r-20||r<-a.r-20||n>l+a.r+20||r>i+a.r+20)continue;const s=a.t/a.d;e.globalAlpha=.12+.1*s,e.fillStyle="#f4d96e",e.beginPath(),e.arc(n,r,a.r,0,2*Math.PI),e.fill(),e.globalAlpha=.2+.2*Math.sin(5*(c.t+t))*s,e.strokeStyle="#fff0a9",e.lineWidth=1.5,e.beginPath(),e.arc(n,r,.68*a.r+2*Math.sin(4*(c.t+t)),0,2*Math.PI),e.stroke(),e.globalAlpha=1}for(let t=0;t<p.length;t++){const a=p[t],n=a.x-f,r=a.y-h;n<-40||r<-40||n>l+40||r>i+40||(e.fillStyle=a.ht>0?"#9db4d1":a.sl?"#70805a":"#4b667f",e.beginPath(),e.arc(n,r,a.r,0,2*Math.PI),e.fill(),e.fillStyle="#f0627c",e.fillRect(n-4|0,r-2|0,3,3),e.fillRect(n+1|0,r-2|0,3,3))}e.fillStyle="#ffd56d";for(let t=0;t<u.length;t++){const l=u[t],i=l.x-f,a=l.y-h;e.fillRect(i-2|0,a-2|0,4,4)}const C=d.x-f+d.rx,D=d.y-h+d.ry,A=Math.abs(d.vx)>=Math.abs(d.vy)?d.face>0?s.e:s.w:d.vy<0?d.face>0?s.ne:s.nw:d.face>0?s.se:s.sw;if(e.fillStyle="rgba(0,0,0,.35)",e.beginPath(),e.ellipse(C,D+14,17,6,0,0,2*Math.PI),e.fill(),A&&A.complete?e.drawImage(A,C-22,D-18,44,30):(e.fillStyle="#0b0f14",e.beginPath(),e.arc(C,D,12,0,2*Math.PI),e.fill(),e.fillStyle="#ef4f6c",e.fillRect(C+3|0,D-6|0,7,3)),d.mkS>0&&d.zt<=0){const t=d.face>0?-1:1,l=k(d.mkS/.32,0,1),i=C+13*t,a=D+8,n=i+t*(11+2.2*Math.sin(36*c.t)),r=a+7+1.1*Math.sin(22*c.t);e.strokeStyle="rgba(248,220,112,"+(.38+.45*l)+")",e.lineWidth=2,e.beginPath(),e.moveTo(i,a),e.quadraticCurveTo(.5*(i+n),a+2,n,r),e.stroke(),e.fillStyle="rgba(250,214,103,.72)",e.beginPath(),e.arc(n+2*t,r+2,2.1,0,2*Math.PI),e.fill(),e.fillStyle="rgba(244,205,93,.38)",e.beginPath(),e.ellipse(n+5*t,r+7,5.2,2.7,0,0,2*Math.PI),e.fill()}if((d.zc>0||d.zcd>0)&&d.zt<=0){const t=d.zcd>0?0:Math.min(1,d.zc/d.zLoad),l=t<=0?Math.max(0,1-d.zcd/d.zCool):0,i=18+8*t+1.2*Math.sin(22*c.t);e.strokeStyle=d.zr?"#8fffe5":"#ffd56d",e.lineWidth=2+1.8*t,e.beginPath(),e.arc(C,D,i,.5*-Math.PI,.5*-Math.PI+2*Math.PI*t),e.stroke(),d.zcd>0&&(e.strokeStyle="rgba(158,200,255,.7)",e.lineWidth=2,e.beginPath(),e.arc(C,D,16,.5*-Math.PI,.5*-Math.PI+2*Math.PI*l),e.stroke())}if(d.zt>0){const t=d.zt/2;e.strokeStyle="rgba(143,255,229,.7)",e.lineWidth=2.5,e.beginPath(),e.arc(C,D,20+2*Math.sin(30*c.t)+4*t,0,2*Math.PI),e.stroke(),e.fillStyle="rgba(143,255,229,.16)",e.beginPath(),e.ellipse(C-10*d.zx,D-7*d.zy,20,10,Math.atan2(d.zy,d.zx),0,2*Math.PI),e.fill()}d.flash>0&&(e.globalAlpha=d.flash/.07,e.fillStyle="#ffe598",e.beginPath(),e.moveTo(C+16*d.gx,D+8*d.gy),e.lineTo(C+24*d.gx-5*d.gy,D+24*d.gy+4*d.gx),e.lineTo(C+24*d.gx+5*d.gy,D+24*d.gy-4*d.gx),e.closePath(),e.fill(),e.globalAlpha=1);for(let t=0;t<T.length;t++){const a=T[t],n=a.x-f,r=a.y-h;n<-8||r<-8||n>l+8||r>i+8||(e.globalAlpha=Math.max(0,Math.min(1,2.4*a.t)),e.fillStyle=a.c,e.fillRect(0|n,0|r,3,3))}e.globalAlpha=1;const L=44,E=l-18-L,K=l<420,W=K?118:104;let q=62,X=74;const H=Math.max(96,l-190),B=10+W;if(e.fillStyle="rgba(7,10,16,.76)",e.fillRect(10,10,l-20,W),e.fillStyle="#eef4ff",e.font="700 17px Trebuchet MS,sans-serif",e.fillText("SCOTTY SURVIVAL",20,32),K){const t=52,i=(l-44)/3;e.font="600 13px Trebuchet MS,sans-serif",e.fillStyle="#9ec8ff",e.fillText("Time "+c.time.toFixed(1)+"s",20,t),e.fillStyle="#ffd56d",e.fillText("Kills "+c.kills,20+i,t),e.fillStyle="#69f0c9",e.fillText("Level "+c.level,20+2*i,t),e.textAlign="right",e.fillStyle="#dce8ff",e.fillText("Best "+c.best,l-24,68),e.textAlign="left",q=76,X=88}else e.font="600 14px Trebuchet MS,sans-serif",e.fillStyle="#9ec8ff",e.fillText("Time "+c.time.toFixed(1)+"s",20,54),e.fillStyle="#ffd56d",e.fillText("Kills "+c.kills,120,54),e.fillStyle="#69f0c9",e.fillText("Level "+c.level,200,54),e.textAlign="right",e.fillStyle="#dce8ff",e.fillText("Best "+c.best,l-24,54),e.textAlign="left";if(e.fillStyle="#2a3346",e.fillRect(20,q,H,10),e.fillStyle="#ef4f6c",e.fillRect(20,q,H*(d.hp/d.maxHp),10),e.fillStyle="#24374d",e.fillRect(20,X,H,8),e.fillStyle="#69f0c9",e.fillRect(20,X,H*(c.xp/c.nextXp),8),c.start&&!c.dead){const t=(t,l,i,a,n,r)=>{e.fillStyle="rgba(8,12,19,.92)",e.fillRect(E,t,L,L),e.strokeStyle=a?l:"rgba(129,157,187,.7)",e.lineWidth=2,e.strokeRect(E+.5,t+.5,43,43),e.strokeStyle="rgba(72,88,109,.85)",e.lineWidth=3,e.beginPath(),e.arc(E+22,t+22,14.96,0,2*Math.PI),e.stroke(),e.strokeStyle=l,e.beginPath(),e.arc(E+22,t+22,14.96,.5*-Math.PI,.5*-Math.PI+2*Math.PI*k(i,0,1)),e.stroke(),e.fillStyle=l,r<1?(e.beginPath(),e.moveTo(E+21.56,t+8.36),e.lineTo(E+.35*L,t+23.32),e.lineTo(E+21.56,t+23.32),e.lineTo(E+17.16,t+36.08),e.lineTo(E+29.48,t+18.04),e.lineTo(E+22.44,t+18.04),e.closePath(),e.fill()):(e.beginPath(),e.arc(E+22,t+19.36,4.4,0,2*Math.PI),e.fill(),e.beginPath(),e.moveTo(E+22,t+8.8),e.bezierCurveTo(E+30.36,t+19.8,E+28.16,t+29.48,E+22,t+34.32),e.bezierCurveTo(E+15.84,t+29.48,E+13.64,t+19.8,E+22,t+8.8),e.fill()),n>0?(e.fillStyle="#dce8ff",e.font="700 10px Trebuchet MS,sans-serif",e.fillText(n.toFixed(1)+"s",E+8,t+L-6)):a&&(e.fillStyle="rgba(255,255,255,.8)",e.beginPath(),e.arc(E+L-8,t+8,3,0,2*Math.PI),e.fill())};t(14,"#8fffe5",d.zcd>0?1-d.zcd/d.zCool:d.zr?1:d.zc/d.zLoad,d.zt>0,d.zcd>0?d.zcd:0,0),t(66,"#f4d96e",d.mkT>0?1-d.mkT/d.mkI:1,d.mkS>0,d.mkT>0?d.mkT:0,1)}if(c.msgT>0&&(e.fillStyle="rgba(8,12,19,.74)",e.fillRect(14,B+4,l-28,28),e.fillStyle="#d7ffe8",e.font="600 13px Trebuchet MS,sans-serif",e.fillText(c.msg,22,B+23)),c.start&&!c.dead&&!c.lvup){const t=g.x+g.tx,l=g.y+g.ty;e.fillStyle="rgba(7,11,17,.42)",e.beginPath(),e.arc(g.x,g.y,g.r+8,0,2*Math.PI),e.fill(),e.strokeStyle="rgba(158,200,255,.45)",e.lineWidth=2,e.beginPath(),e.arc(g.x,g.y,g.r,0,2*Math.PI),e.stroke(),e.fillStyle="rgba(105,240,201,"+(m?.65:.42)+")",e.beginPath(),e.arc(t,l,g.kr,0,2*Math.PI),e.fill(),e.strokeStyle="rgba(220,248,255,.65)",e.lineWidth=1.5,e.beginPath(),e.arc(t,l,g.kr,0,2*Math.PI),e.stroke()}if(!c.start){const t=20,a=.16*i,n=l-40,r=.68*i,s=t+16;e.fillStyle="rgba(6,9,14,.86)",e.fillRect(t,a,n,r),e.fillStyle="#fff",e.font="700 30px Trebuchet MS,sans-serif",e.fillText("what the dog doing",s,a+44),e.fillStyle="#9ec8ff",e.font="700 15px Trebuchet MS,sans-serif",e.fillText("lore",s,a+72),e.fillStyle="#d8e6ff",e.font="600 16px Trebuchet MS,sans-serif",w("night at cmu, a weird static swarm leaked across campus.",s,a+94,n-32,20,2),w("students and professors are hiding inside the schools, and scotty is the only one fast enough to move between them.",s,a+134,n-32,20,3),e.fillStyle="#9ec8ff",e.font="700 15px Trebuchet MS,sans-serif",e.fillText("tutorial",s,a+182),e.fillStyle="#d8e6ff",e.font="600 16px Trebuchet MS,sans-serif",e.fillText("eat mints to get xp and level up",s,a+206),e.fillText("visit engineering, cs, physics, chemistry, psychology",s,a+230),e.fillText("each school unlocks support before the final fight",s,a+254),e.fillText("touch: left thumb joystick | keyboard: wasd, e, 1/2/3",s,a+278),e.fillStyle="#69f0c9",e.font="700 23px Trebuchet MS,sans-serif",e.fillText("tap or press space to start",s,a+338)}if(c.lvup&&!c.dead){e.fillStyle="rgba(6,10,15,.16)",e.fillRect(0,0,l,i);const t=P(),a=t.bx,n=t.by,r=t.bw,s=t.bh,o=t.rects,f=t.mobile;e.fillStyle="rgba(17,29,45,.95)",v(a,n,r,s,16),e.fill(),e.strokeStyle="rgba(90,125,163,.8)",e.lineWidth=1.2,v(a+.5,n+.5,r-1,s-1,16),e.stroke(),e.fillStyle="#ecf3ff",e.font=(f?"700 18px":"700 20px")+" Trebuchet MS,sans-serif",e.fillText("SCOTTY'S SKILL BOOK",a+14,n+24),e.fillStyle="#9ec8ff",e.font="600 12px Trebuchet MS,sans-serif",e.fillText("Choose one upgrade",a+14,n+39);for(let t=0;t<3;t++){const l=c.choices[t],i=o[t],a=.9+.1*z(k((c.cardT-.07*t)/.28,0,1)),n=i.x+.5*i.w,r=i.y+.5*i.h;if(e.save(),e.translate(n,r),e.scale(a,a),e.translate(-n,-r),e.fillStyle="rgba(27,44,66,.96)",v(i.x,i.y,i.w,i.h,10),e.fill(),e.strokeStyle="rgba(116,150,186,.85)",e.lineWidth=1.2,v(i.x+.5,i.y+.5,i.w-1,i.h-1,10),e.stroke(),l){const t=I(l.n)+" "+l.n;let a=f?16:17;for(;a>12&&(e.font="700 "+a+"px Trebuchet MS,sans-serif",!(e.measureText(t).width<=i.w-22));a--);e.fillStyle="#eef5ff",e.fillText(t,i.x+12,i.y+30),e.fillStyle="#a9c3e2",e.font="600 12px Trebuchet MS,sans-serif",w(l.d,i.x+12,i.y+48,i.w-24,14,2)}e.restore()}e.fillStyle="#95bce8",e.font="600 12px Trebuchet MS,sans-serif",e.fillText("Tap a choice or press 1/2/3",a+14,n+s-12)}c.dead&&(e.fillStyle="rgba(5,8,13,.86)",e.fillRect(24,.24*i,l-48,.5*i),e.fillStyle="#ff8298",e.font="700 33px Trebuchet MS,sans-serif",e.fillText("GAME OVER",.5*l-98,.38*i),e.fillStyle="#dce8ff",e.font="600 20px Trebuchet MS,sans-serif",e.fillText("Kills "+c.kills,.5*l-43,.47*i),e.fillText("Best "+c.best,.5*l-37,.53*i),e.fillStyle="#69f0c9",e.font="700 24px Trebuchet MS,sans-serif",e.fillText("Tap or press Space to retry",.5*l-139,.65*i))}(),requestAnimationFrame(t)})})();</script></body></html>